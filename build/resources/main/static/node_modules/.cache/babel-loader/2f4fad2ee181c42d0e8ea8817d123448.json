{"ast":null,"code":"import _regeneratorRuntime from\"/Users/davidnogueira/Documents/My Projects/MarsRoverAPI/src/main/resources/static/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/davidnogueira/Documents/My Projects/MarsRoverAPI/src/main/resources/static/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/Users/davidnogueira/Documents/My Projects/MarsRoverAPI/src/main/resources/static/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/davidnogueira/Documents/My Projects/MarsRoverAPI/src/main/resources/static/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import{ImageSlideshowMainDiv,SlideshowBlackBackDrop,SlideshowGreyBackDrop,SlideshowImg,BtnDiv,SlideshowBtn,NoImages,ImageDescriptionDiv,DescriptionLine,DownloadMessage}from\"./ImageSlideshowStyles\";import{Context}from\"../../App\";import moment from\"moment\";import Axios from\"axios\";import AwesomeDebouncePromise from'awesome-debounce-promise';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faChevronLeft,faChevronRight}from'@fortawesome/free-solid-svg-icons';var ImageSlideshow=function ImageSlideshow(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),activeImage=_useState2[0],setActiveImage=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),fileName=_useState4[0],setFileName=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isImageDownloaded=_useState6[0],setIsImageDownloaded=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),errors=_useState8[0],setErrors=_useState8[1];var context=useContext(Context);var changeActiveImage=function changeActiveImage(type){if(type===\"BACK\"){if(activeImage>0){setActiveImage(activeImage-1);}}if(type===\"NEXT\"){if(activeImage<context.state.length-1){if(isImageDownloaded){setIsImageDownloaded(false);}setActiveImage(activeImage+1);}}};var images=context.state.length>0?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(BtnDiv,null,/*#__PURE__*/React.createElement(SlideshowBtn,{onClick:function onClick(event){return changeActiveImage(\"BACK\");}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faChevronLeft})),/*#__PURE__*/React.createElement(SlideshowBtn,{onClick:function onClick(event){return changeActiveImage(\"NEXT\");}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faChevronRight})),/*#__PURE__*/React.createElement(ImageDescriptionDiv,null,/*#__PURE__*/React.createElement(DescriptionLine,null,\"Image \",activeImage+1,\" out of \",context.state.length),/*#__PURE__*/React.createElement(DescriptionLine,null,\"Date selected : \",moment(context.state[activeImage].earth_date).format('MMMM Do YYYY')))),/*#__PURE__*/React.createElement(SlideshowImg,{src:context.state[activeImage].img_src}),/*#__PURE__*/React.createElement(BtnDiv,null,/*#__PURE__*/React.createElement(SlideshowBtn,{onClick:function onClick(event){debounceImageDownload();}},\"Download\"))):/*#__PURE__*/React.createElement(NoImages,null,/*#__PURE__*/React.createElement(\"h1\",null,\"No Images\"));var handleImageDownload=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var request;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Axios.get(\"/download-image?url=\".concat(context.state[activeImage].img_src));case 3:request=_context.sent;if(request.status===200){console.log(request.data);setFileName(request.data);setIsImageDownloaded(true);}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);setErrors([].concat(_toConsumableArray(errors),[\"failed-download\"]));case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function handleImageDownload(){return _ref.apply(this,arguments);};}();var debounceImageDownload=AwesomeDebouncePromise(handleImageDownload,500);return/*#__PURE__*/React.createElement(ImageSlideshowMainDiv,null,/*#__PURE__*/React.createElement(SlideshowBlackBackDrop,null,/*#__PURE__*/React.createElement(SlideshowGreyBackDrop,null,images)),isImageDownloaded&&/*#__PURE__*/React.createElement(DownloadMessage,{style:{color:\"green\"}},\"Your image has been downloaded successfully as \",fileName),errors.includes(\"failed-download\")&&/*#__PURE__*/React.createElement(DownloadMessage,{style:{color:\"red\"}}));};export default ImageSlideshow;","map":{"version":3,"sources":["/Users/davidnogueira/Documents/My Projects/MarsRoverAPI/src/main/resources/static/src/Components/ImageSlideshow/ImageSlideshow.tsx"],"names":["React","useState","useContext","ImageSlideshowMainDiv","SlideshowBlackBackDrop","SlideshowGreyBackDrop","SlideshowImg","BtnDiv","SlideshowBtn","NoImages","ImageDescriptionDiv","DescriptionLine","DownloadMessage","Context","moment","Axios","AwesomeDebouncePromise","FontAwesomeIcon","faChevronLeft","faChevronRight","ImageSlideshow","activeImage","setActiveImage","fileName","setFileName","isImageDownloaded","setIsImageDownloaded","errors","setErrors","context","changeActiveImage","type","state","length","images","event","earth_date","format","img_src","debounceImageDownload","handleImageDownload","get","request","status","console","log","data","color","includes"],"mappings":"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","sourcesContent":["import React, { FC, useState, useContext } from \"react\"\nimport { \n    ImageSlideshowMainDiv,\n    SlideshowBlackBackDrop,\n    SlideshowGreyBackDrop,\n    SlideshowImg,\n    BtnDiv,\n    SlideshowBtn,\n    NoImages,\n    ImageDescriptionDiv,\n    DescriptionLine,\n    DownloadMessage\n } from \"./ImageSlideshowStyles\";\nimport { Context } from \"../../App\";\nimport moment from \"moment\";\nimport Axios from \"axios\";\nimport AwesomeDebouncePromise from 'awesome-debounce-promise';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faChevronLeft , faChevronRight } from '@fortawesome/free-solid-svg-icons'\n\nconst ImageSlideshow:FC = ():JSX.Element => {\n    const [activeImage , setActiveImage] = useState<number>(0);\n    const [fileName , setFileName] = useState<string>(\"\");\n    const [isImageDownloaded , setIsImageDownloaded] = useState<boolean>(false);\n    const [errors , setErrors] = useState<string[]>([]);\n    \n    const context = useContext(Context);\n\n    const changeActiveImage = (type : string) => {\n      if (type === \"BACK\") {\n        if (activeImage > 0){\n          setActiveImage(activeImage - 1)\n        }\n      }\n      if (type === \"NEXT\") {\n        if (activeImage < (context.state.length - 1)) {\n          if (isImageDownloaded) {\n            setIsImageDownloaded(false);\n          }\n          setActiveImage(activeImage + 1)\n        }\n      }\n    }\n\n    const images = context.state.length > 0 ?\n    <>\n      <BtnDiv>\n        <SlideshowBtn onClick={(event: React.MouseEvent<HTMLAnchorElement>) => changeActiveImage(\"BACK\")}>\n          <FontAwesomeIcon icon={faChevronLeft}/>\n        </SlideshowBtn>\n        <SlideshowBtn onClick={(event: React.MouseEvent<HTMLAnchorElement>) => changeActiveImage(\"NEXT\")}>\n          <FontAwesomeIcon icon={faChevronRight}/>\n        </SlideshowBtn>\n        <ImageDescriptionDiv>\n          <DescriptionLine>Image {activeImage + 1} out of {context.state.length}</DescriptionLine>\n          <DescriptionLine>Date selected : {moment(context.state[activeImage].earth_date).format('MMMM Do YYYY')}</DescriptionLine>\n        </ImageDescriptionDiv>\n      </BtnDiv>\n      <SlideshowImg src={context.state[activeImage].img_src}/>\n      <BtnDiv>\n        <SlideshowBtn onClick={(event:React.MouseEvent<HTMLAnchorElement>) => {debounceImageDownload();}}>Download</SlideshowBtn>\n      </BtnDiv>\n    </>\n    :\n  <NoImages>\n    <h1>No Images</h1>\n  </NoImages>\n\n  const handleImageDownload = async () => {\n    try {\n      const request = await Axios.get(`/download-image?url=${context.state[activeImage].img_src}`);\n        if (request.status === 200) {\n            console.log(request.data)\n            setFileName(request.data)\n            setIsImageDownloaded(true);\n        }\n    } catch (error) {\n      setErrors([...errors , \"failed-download\"])\n    }\n}\n\n  const debounceImageDownload = AwesomeDebouncePromise(handleImageDownload , 500)\n\n    return (\n        <ImageSlideshowMainDiv>\n          <SlideshowBlackBackDrop>\n              <SlideshowGreyBackDrop>\n                { images }\n                </SlideshowGreyBackDrop>\n            </SlideshowBlackBackDrop>\n            {\n            isImageDownloaded &&\n            <DownloadMessage style={{color: \"green\"}}>Your image has been downloaded successfully as {fileName}</DownloadMessage>\n          }\n          {\n            errors.includes(\"failed-download\") && \n            <DownloadMessage style={{color: \"red\"}}></DownloadMessage>\n          }\n        </ImageSlideshowMainDiv>\n    )\n}\n\nexport default ImageSlideshow;"]},"metadata":{},"sourceType":"module"}