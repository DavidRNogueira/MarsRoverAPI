{"version":3,"file":"index.es.js","sources":["../src/index.ts"],"sourcesContent":["export type ResolveCallback<T> = (value: T | PromiseLike<T>) => void\nexport type RejectCallback = (reason?: any) => void\nexport type CancelCallback = () => void\n\nexport type ImperativePromise<T> = {\n  promise: Promise<T>\n  resolve: ResolveCallback<T>\n  reject: RejectCallback\n  cancel: CancelCallback\n}\n\nexport function createImperativePromise<T>(promiseArg?: Promise<T> | null | undefined): ImperativePromise<T> {\n  let resolve: ResolveCallback<T> | null = null\n  let reject: RejectCallback | null = null\n\n  const wrappedPromise = new Promise<T>((_resolve, _reject) => {\n    resolve = _resolve\n    reject = _reject\n  })\n\n  promiseArg && promiseArg.then(\n    val => {\n      resolve && resolve(val)\n    },\n    error => {\n      reject && reject(error)\n    }\n  )\n\n  return {\n    promise: wrappedPromise,\n    resolve: (value: T | PromiseLike<T>) => {\n      resolve && resolve(value)\n    },\n    reject: (reason?: any) => {\n      reject && reject(reason)\n    },\n    cancel: () => {\n      resolve = null\n      reject = null\n    }\n  }\n}\n\n\n"],"names":[],"mappings":"iCAW2C,UAA0C;IACnF,IAAI,OAAO,GAA8B,IAAI,CAAA;IAC7C,IAAI,MAAM,GAA0B,IAAI,CAAA;IAExC,IAAM,cAAc,GAAG,IAAI,OAAO,CAAI,UAAC,QAAQ,EAAE,OAAO;QACtD,OAAO,GAAG,QAAQ,CAAA;QAClB,MAAM,GAAG,OAAO,CAAA;KACjB,CAAC,CAAA;IAEF,UAAU,IAAI,UAAU,CAAC,IAAI,CAC3B,UAAA,GAAG;QACD,OAAO,IAAI,OAAO,CAAC,GAAG,CAAC,CAAA;KACxB,EACD,UAAA,KAAK;QACH,MAAM,IAAI,MAAM,CAAC,KAAK,CAAC,CAAA;KACxB,CACF,CAAA;IAED,OAAO;QACL,OAAO,EAAE,cAAc;QACvB,OAAO,EAAE,UAAC,KAAyB;YACjC,OAAO,IAAI,OAAO,CAAC,KAAK,CAAC,CAAA;SAC1B;QACD,MAAM,EAAE,UAAC,MAAY;YACnB,MAAM,IAAI,MAAM,CAAC,MAAM,CAAC,CAAA;SACzB;QACD,MAAM,EAAE;YACN,OAAO,GAAG,IAAI,CAAA;YACd,MAAM,GAAG,IAAI,CAAA;SACd;KACF,CAAA;CACF;;;;"}